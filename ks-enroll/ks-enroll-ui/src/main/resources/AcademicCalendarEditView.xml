<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/util
                           http://www.springframework.org/schema/util/spring-util-2.0.xsd">
    <bean id="KS-AcademicCalendar-EditView" parent="KSFormView">
        <property name="id" value="academicCalendarEditView"/>
        <property name="title" value="Academic Calendar"/>
        <property name="singlePageView" value="true"/>
        <property name="viewHelperServiceClassName" value="org.kuali.student.enrollment.class2.acal.service.impl.AcademicCalendarViewHelperServiceImpl"/>
        <property name="page">
            <bean parent="Uif-Page"/>
        </property>
        <property name="header">
            <bean parent="Uif-HeaderField-Two"/>
        </property>
        <property name="footer">
            <bean parent="Uif-FooterBase"/>
        </property>
        <property name="items">
            <list>
                <ref bean="KS-AcademicCalendar-EditSection"/>
                <ref bean="academicTermEdit"/>
            </list>
        </property>
        <!--<property name="additionalCssFiles" ref="ks-css"/>-->
        <property name="formClass" value="org.kuali.student.enrollment.class2.acal.form.AcademicCalendarForm"/>
    </bean>

    <bean id="KS-AcademicCalendar-EditSection" parent="Uif-Page" p:disclosure.render="false">
        <property name="items">
            <list>
                <!--
                <bean parent ="Uif-InputField" p:propertyName="updateTimeString">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="50" p:disabled="true"/>
                    </property>
                </bean> -->
                <bean parent="Uif-MessageField" p:messageText="@{updateTimeString}" p:styleClasses="font-light12"/>
                <ref bean="KS-AcademicCalendar-MetaSection"/>
                <ref bean="KS-AcademicCalendar-EventSection"/>
            </list>
        </property>
        <property name="footer">
            <bean parent="Uif-FooterBase">
                <property name="items">
                    <list>
                        <bean parent="Uif-PrimaryActionButton" p:actionLabel="Save Calendar Draft" p:methodToCall="save"/>
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="KS-AcademicCalendar-MetaSection" parent="Uif-VerticalBoxSection" p:layoutManager.orientation="HORIZONTAL">
        <property name="title" value="Calendar Information" />
        <property name="disclosure.render" value="false"/>
        <property name="items">
            <list>
                <bean parent="Uif-InputField" p:label="Academic Calendar Name"
                      p:labelPlacement="TOP" p:labelField.renderColon="false"
                      p:propertyName="academicCalendarInfo.name" p:labelField.style="display:block;">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30" />
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:propertyName="academicCalendarInfo.adminOrgId"
                      p:label="Organizations" p:labelField.renderColon="false" p:labelField.style="display:block;">
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:options-ref="org-options"/>
                    </property>
                    <!-- <property name="optionsFinder">
                      <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.OrgKeyValues"/>
                  </property>   -->
                </bean>
                <bean parent="Uif-InputField" p:label="Start Date" p:labelPlacement="TOP"
                      p:labelField.renderColon="false" p:labelField.style="display:block;"
                      p:propertyName="academicCalendarInfo.startDate">
                    <property name="control">
                        <bean parent="Uif-DateControl" />
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:label="End Date" p:labelPlacement="TOP" p:labelField.style="display:block;"
                      p:labelField.styleClasses="labelTop" p:labelField.renderColon="false"
                      p:propertyName="academicCalendarInfo.endDate">
                    <property name="control">
                        <bean parent="Uif-DateControl" />
                    </property>
                </bean>
            </list>
        </property>
    </bean>

	<bean id="KS-AcademicCalendar-EventSection" parent="Uif-Disclosure-TableCollectionSection"
		p:layoutManager.numberOfColumns="3">
		<property name="title" value="Events" />
		<property name="collectionObjectClass" value="org.kuali.student.enrollment.acal.dto.AcalEventInfo" />
		<property name="propertyName" value="events" />
		<property name="layoutManager.sequencePropertyName" value="name" />
		<property name="layoutManager.renderSequenceField" value="false" />
		<property name="layoutManager.generateAutoSequence" value="false" />
        <property name="layoutManager.separateAddLine" value="false" />
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:label="Event" p:propertyName="typeKey" p:required="true" />
				<bean parent="Uif-InputField" p:label="Start Date" p:propertyName="startDate" p:required="true">
                    <property name="control">
						<bean parent="Uif-DateControl" />
					</property>
				</bean>
                <bean parent="Uif-InputField" p:label="End Date" p:propertyName="endDate" p:required="true">
                   <property name="control">
						<bean parent="Uif-DateControl" />
					</property>
				</bean>
                <!--
				<bean parent="InputField" p:label="Non Instructional" p:propertyName="isInstructionalDay" p:required="true">
					<property name="control">
						<bean parent="CheckboxControl" />
					</property>
				</bean>  -->
			</list>
		</property>
	</bean>

    <util:list id="org-options">
        <bean parent="Uif-KeyLabelPair" p:key="102" p:value="Registrar's Office"/>
        <bean parent="Uif-KeyLabelPair" p:key="34" p:value="Medical School"/>
<!--        <bean parent="Uif-KeyLabelPair" p:key="103" p:value="Law School"/>
        <bean parent="Uif-KeyLabelPair" p:key="105" p:value="Continuing Study"/>    -->
    </util:list>

    <!-- Academic terms -->
    <bean id="academicTermEdit" parent="Uif-Disclosure-StackedCollectionSection">
     <property name="title"
       value="Terms" />
     <!--<property name="instructionalText" value="This is a stacked layout of a collection - CollectionGroup" />-->
     <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.acal.dto.AcademicTermWrapper" />
     <property name="propertyName" value="termWrapperList" />
     <!--<property name="layoutManager.summaryTitle" value="Line Summary '@{#line.field1}' With Expression" />-->
     <property name="items">
       <list>
         <bean parent="Uif-InputField" p:propertyName="name" p:label="Name" p:labelPlacement="TOP" p:labelField.renderColon="false" p:labelField.style="display:block;" p:required="true">
            <property name="control">
                <bean parent="Uif-TextControl" p:size="20" />
            </property>
        </bean>
         <bean parent="Uif-InputField" p:propertyName="termType" p:label="Term Type" p:labelPlacement="TOP" p:required="true" >
             <property name="control">
                <bean parent="Uif-DropdownControl"/><!--  p:options-ref="termTypes-options" /> -->
             </property>
             <property name="optionsFinder">
                <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.TermTypeKeyValues"/>
             </property>
         </bean>
        <bean parent="Uif-InputField" p:propertyName="startDate" p:label="Start Date" p:labelPlacement="TOP" p:labelField.renderColon="false" p:labelField.style="display:block;" p:required="true">
            <property name="control">
                <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="endDate" p:label="End Date" p:labelPlacement="TOP" p:labelField.renderColon="false" p:labelField.style="display:block;" p:required="true">
            <property name="control">
                <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="instructionalDays" p:label="Instructional Days" p:readOnly="true" p:labelPlacement="TOP" p:labelField.renderColon="false" p:labelField.style="display:block;" p:required="true">
            <property name="control">
                <bean parent="Uif-TextControl" p:size="5" />
            </property>
        </bean>
       </list>
     </property>
     <property name="subCollections">
       <list>
         <ref bean="keyDateSubCollection" />
       </list>
     </property>
   </bean>

   <bean id="keyDateSubCollection" parent="Uif-Disclosure-TableSubCollection-WithinSection" p:layoutManager.numberOfColumns="7">
     <property name="title" value="KEY DATES" />
     <!--<property name="instructionalText" value="A table collection within an item of a stacked collection" /> -->
     <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.acal.dto.KeyDateWrapper" />
     <property name="propertyName" value="keydates" />
     <property name="layoutManager.sequencePropertyName" value="keyDateType" />
     <property name="layoutManager.richTable.render" value="true" />
     <property name="items">
       <list>
         <bean parent="Uif-InputField" p:propertyName="keyDateType" p:label="Key Date Type" p:required="true" >
             <property name="control">
                <bean parent="Uif-DropdownControl"/><!--  p:options-ref="termTypes-options" /> -->
             </property>
             <property name="optionsFinder">
                <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.TermTypeKeyValues"/>
             </property>
         </bean>
         <bean parent="Uif-InputField" p:propertyName="startDate" p:label="Start Date" p:required="true">
            <property name="control">
                <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="startTime" p:label="Start Time" p:required="true">
            <property name="control">
                <bean parent="Uif-TextControl" p:size="5" />
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="startTimeAmPm" p:label="" p:required="true" >
             <property name="control">
                <bean parent="Uif-DropdownControl" p:options-ref="time-options" />
             </property>
         </bean>
        <bean parent="Uif-InputField" p:propertyName="endDate" p:label="End Date" p:required="true">
            <property name="control">
                <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="endTime" p:label="End Time" p:required="true">
            <property name="control">
                <bean parent="Uif-TextControl" p:size="5" />
            </property>
        </bean>
        <bean parent="Uif-InputField" p:propertyName="endTimeAmPm" p:label="" p:required="true" >
             <property name="control">
                <bean parent="Uif-DropdownControl" p:options-ref="time-options" />
             </property>
         </bean>
       </list>
     </property>
     <property name="actionFields">
          <list>
              <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="deleteKeyDate" p:actionLabel="X" p:title="No Grade"/>
          </list>
    </property>
   </bean>

    <util:list id="time-options">
       <bean parent="Uif-KeyLabelPair" p:key="am" p:value="am"/>
       <bean parent="Uif-KeyLabelPair" p:key="pm" p:value="pm"/>
    </util:list>

</beans>