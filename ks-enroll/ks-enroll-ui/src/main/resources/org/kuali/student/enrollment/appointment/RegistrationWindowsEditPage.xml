<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="KS-RegistrationWindowsManagement-EditPage" parent="Uif-Page" p:disclosure.render="false">
        <property name="id" value="registrationWindowsEditPage"/>
        <property name="title" value="@{termInfo.name != null? termInfo.name : 'No Term'}"/>
        <!--<property name="title" value="hello"/>-->
        <property name="header">
            <bean parent="Uif-HeaderField-Two"/>
        </property>
        <property name="items">
            <list>
                <bean parent="Uif-TabSection" >
                    <property name="items">
                        <list>
                            <ref bean="KS-RegistrationWindows-EditSection"/>
                            <ref bean="KS-RegistrationAppointments-EditSection"/>
                        </list>
                    </property>
                    <!--<property name="tabsWidget.componentOptionsJSString">-->
                    <!--<value> { selected: @{defaultSelectedTabIndex} } </value>-->
                    <!--</property>-->
                </bean>
            </list>
        </property>
        <property name="footer">
            <bean parent="Uif-FooterBase">
                <property name="items">
                    <list>
                        <bean parent="Uif-SecondaryActionButton"  p:actionLabel="Preview Assignments to Selected Windows" />
                        <bean parent="Uif-SecondaryActionButton" p:actionLabel="Assign Students to Selected Windows"  />
                        <bean parent="Uif-PrimaryActionButton" p:methodToCall="save" p:actionLabel="Save" p:clientSideValidate="true" />
                    </list>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="KS-RegistrationWindows-EditSection" parent="Uif-Page" p:disclosure.render="false" p:style="min-width:70em;" >
        <property name="title" value="Registration Windows" />
        <property name="items">
            <list>
                <ref bean="KS-RegistrationWindows-PeriodSection"/>
                <ref bean="KS-RegistrationWindows-AddWindowsSection"/>

                <!--<bean parent="Uif-MessageField" p:messageText="This is a test" p:styleClasses="font-light12"/>-->
                <!--<bean parent="Uif-InputField" p:propertyName="termType" p:label="Term" p:required="true">-->
                <!--<property name="control">-->
                <!--<bean parent="Uif-DropdownControl"/>-->
                <!--</property>-->
                <!--<property name="optionsFinder">-->
                <!--<bean class="org.kuali.student.enrollment.class2.acal.keyvalue.AcademicTermTypeKeyValues"/>-->
                <!--</property>-->
                <!--</bean>-->
            </list>
        </property>
    </bean>

    <bean id="KS-RegistrationWindows-PeriodSection" parent="Uif-VerticalBoxSection" >
        <property name="title" value="" />
        <property name="disclosure.render" value="false"/>
        <property name="items">
            <list>
                <bean parent="Uif-HorizontalFieldGroup">
                    <property name="items">
                        <list>
                            <bean parent="Uif-InputField" p:label="Period"
                                  p:labelPlacement="TOP" p:labelField.renderColon="false"
                                  p:propertyName="periodId" p:labelField.style="display:block;">
                                <property name="control">
                                    <!--<bean parent="Uif-TextControl" p:size="30" />-->
                                    <bean parent="Uif-DropdownControl"/>
                                </property>
                                <property name="optionsFinder">
                                    <bean class="org.kuali.student.enrollment.class2.appointment.keyvalue.PeriodKeyDatesFinder"/>
                                </property>
                            </bean>
                            <bean parent="Uif-PrimaryActionButton" p:methodToCall="show" p:actionLabel="Show" p:clientSideValidate="true" />
                        </list>
                   </property>
                </bean>
                <bean parent="Uif-HorizontalFieldGroup">
                    <property name="items">
                        <list>
                            <bean parent="Uif-MessageField" p:messageText="@{periodInfoDetails}" p:styleClasses="font-light12"/>
                        </list>
                    </property>
                </bean>
                <!--<bean parent="Uif-InputField" p:propertyName="academicCalendarInfo.adminOrgId"-->
                <!--p:label="Organization" p:labelField.renderColon="false" p:labelField.style="display:block;">-->
                <!--<property name="control">-->
                <!--<bean parent="Uif-DropdownControl" p:options-ref="org-options"/>-->
                <!--</property>-->
                <!-- <property name="optionsFinder">
                    <bean class="org.kuali.student.enrollment.class2.acal.keyvalue.OrgKeyValues"/>
                </property>   -->
                <!--</bean>-->
            </list>
        </property>
    </bean>

    <bean id="KS-RegistrationWindows-AddWindowsSection" parent="Uif-Disclosure-TableCollectionSection"
          p:layoutManager.numberOfColumns="11">
        <property name="title" value="Add Windows" />
        <property name="collectionObjectClass" value="org.kuali.student.enrollment.class2.appointment.dto.AppointmentWindowWrapper" />
        <property name="propertyName" value="appointmentWindows" />
        <!--<property name="layoutManager.sequencePropertyName" value="name" />-->
        <property name="layoutManager.renderSequenceField" value="false" />
        <property name="layoutManager.generateAutoSequence" value="false" />
        <property name="layoutManager.separateAddLine" value="false" />
        <property name="layoutManager.richTable.disableTableSort" value="true" />
        <property name="addLineLabelField.labelText" value=""/>
        <property name="layoutManager.richTable.render" value="false" />
        <property name="layoutManager.applyAlternatingRowStyles" value="false" />
        <property name="items">
            <list>
                <!-- period, name, student group, start date, start time, am/pm -->
                <bean parent="Uif-InputField" p:label="Period" p:propertyName="periodKey" p:required="true" p:style="font-weight:bold;" p:render="@{periodId =='all' and #isAddLine }">
                    <property name="control">
                        <!--<bean parent="Uif-TextControl" p:size="30" />-->
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.appointment.keyvalue.PeriodForAppWindowKeyDatesFinder"/>
                    </property>
                </bean>

                <bean parent="Uif-InputField" p:label="Period" p:propertyName="periodName" p:required="true" p:readOnly="true"
                      p:style="font-weight:bold;" p:render="@{periodId != 'all' or !#isAddLine}" >
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="30" />
                    </property>
                </bean>

                <bean parent="Uif-InputField"  p:label="Window"  p:propertyName="appointmentWindowInfo.name" p:required="true" p:style="font-weight:bold;" p:readOnly="@{!#isAddLine}">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="10" />
                    </property>
                </bean>
                <bean parent="Uif-InputField"  p:label="Student Group"  p:propertyName="assignedPopulationName" p:required="true" p:style="font-weight:bold;">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="16" />
                    </property>
                    <property name="fieldLookup.dataObjectClassName" value="org.kuali.student.enrollment.class2.appointment.dto.StudentGroupWrapper" />
                    <property name="fieldLookup.fieldConversions">
                        <map>
                            <entry key="name" value="assignedPopulationName" />
                            <entry key="id" value="appointmentWindowInfo.assignedPopulationId" />
                        </map>
                    </property>
                    <!--<property name="fieldSuggest.render" value="true" />-->
                    <!--<property name="fieldSuggest.sourcePropertyName" value="name" />-->
                    <!--<property name="fieldSuggest.suggestQuery.dataObjectClassName"-->
                              <!--value="org.kuali.student.enrollment.class2.appointment.dto.StudentGroupWrapper" />-->

                </bean>
                <bean parent="Uif-InputField" p:propertyName="startDate" p:label="Start Date" p:required="true" p:style="font-weight:normal;" p:alternateDisplayPropertyName="startDateUI">
                    <property name="control">
                        <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="BasicDatePatternConstraint" />
                    </property>
                </bean>
                <bean parent="Uif-InputField-LabelTop" p:propertyName="startTime" p:label="Start Time" p:labelPlacement="LEFT"
                      p:persistInSession="true" p:required="true" p:style="font-weight:normal;"   >
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="5"  p:watermarkText="HH:mm"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="TimePatternConstraint" />
                    </property>
                </bean>
                <bean parent="Uif-InputField-LabelTop" p:propertyName="startTimeAmPm" p:persistInSession="true" p:style="font-weight:normal;" p:required="true" >
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:options-ref="hctime-options"/>
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:propertyName="endDate" p:label="Last Date"  p:style="font-weight:normal;">
                    <property name="control">
                        <bean parent="Uif-DateControl" p:size="10" p:watermarkText="mm/dd/yyyy"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="BasicDatePatternConstraint" />
                    </property>
                </bean>
                <bean parent="Uif-InputField-LabelTop" p:propertyName="endTime" p:label="Closing Time" p:labelPlacement="LEFT" p:style="font-weight:normal;" >
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="5"  p:watermarkText="HH:mm"/>
                    </property>
                    <property name="validCharactersConstraint">
                        <bean parent="TimePatternConstraint" />
                    </property>
                </bean>
                <bean parent="Uif-InputField-LabelTop" p:propertyName="endTimeAmPm"  p:style="font-weight:normal;" >
                    <property name="control">
                        <bean parent="Uif-DropdownControl" p:options-ref="hctime-options"/>
                    </property>
                </bean>
                <bean parent="Uif-InputField" p:label="Slot Allocation Method" p:propertyName="windowTypeKey" p:required="true" p:style="font-weight:bold;" >
                    <property name="control">
                        <bean parent="Uif-DropdownControl"/>
                    </property>
                    <property name="optionsFinder">
                        <bean class="org.kuali.student.enrollment.class2.appointment.keyvalue.RegWindowTypeKeyValues" />
                    </property>
                </bean>
                <bean parent="Uif-InputField"  p:label="Max #"  p:propertyName="appointmentWindowInfo.maxAppointmentsPerSlot" p:refreshWhenChanged="#lp.windowTypeKey"
                      p:readOnly = "@{#lp.windowTypeKey !='kuali.appointment.window.type.slotted.max' }"  p:style="font-weight:bold;">
                    <property name="control">
                        <bean parent="Uif-TextControl" p:size="5" />
                    </property>
                </bean>
            </list>
        </property>
        <property name="actionFields">
            <list>
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="addLine" p:actionLabel="Add Me" p:render="@{#isAddLine}" />
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="assignStudents" p:actionLabel="Assign Students" p:render="@{!#isAddLine and #lp.appointmentWindowInfo.stateKey=='kuali.appointment.window.state.draft'}" p:disabled = "@{#lp.appointmentWindowInfo.id == null }" />
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="breakAppointments" p:actionLabel="Break Appointments" p:render="@{!#isAddLine and #lp.appointmentWindowInfo.stateKey=='kuali.appointment.window.state.assigned'}" p:disabled = "@{#lp.appointmentWindowInfo.id == null }" />
                <bean parent="Uif-PrimaryActionButton-Small" p:methodToCall="deleteLine" p:actionLabel="X" p:render="@{!#isAddLine}" />
            </list>
        </property>
    </bean>


    <bean id="KS-RegistrationAppointments-EditSection" parent="Uif-Page" p:disclosure.render="false" p:style="min-width:70em;" >
        <property name="title" value="Registration Appointments" />
        <property name="items">
            <list>
                <bean parent="Uif-MessageField" p:messageText="This is the Registration Appointments tab" p:styleClasses="font-light12"/>
            </list>
        </property>
    </bean>
</beans>